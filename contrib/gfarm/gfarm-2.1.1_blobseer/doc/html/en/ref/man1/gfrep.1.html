<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>gfrep</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><H1
><A
NAME="GFREP.1"
></A
>gfrep</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="NAME"
></A
><H2
>Name</H2
>gfrep&nbsp;--&nbsp;replicate Gfarm files</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="SYNOPSIS"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>gfrep</B
>  -H <TT
CLASS="REPLACEABLE"
><I
>hostfile</I
></TT
>  [-vm]  <TT
CLASS="REPLACEABLE"
><I
>gfarm-URL</I
></TT
>... </P
><P
><B
CLASS="COMMAND"
>gfrep</B
>  -P <TT
CLASS="REPLACEABLE"
><I
>host-pair-file</I
></TT
>  [-vm]  <TT
CLASS="REPLACEABLE"
><I
>gfarm-URL</I
></TT
>... </P
><P
><B
CLASS="COMMAND"
>gfrep</B
>  -d <TT
CLASS="REPLACEABLE"
><I
>destination-node</I
></TT
>  [-s <TT
CLASS="REPLACEABLE"
><I
>source-node</I
></TT
>] [-I <TT
CLASS="REPLACEABLE"
><I
>file-section</I
></TT
>] [-vm]  <TT
CLASS="REPLACEABLE"
><I
>gfarm-URL</I
></TT
>... </P
><P
><B
CLASS="COMMAND"
>gfrep</B
> [-D <TT
CLASS="REPLACEABLE"
><I
>destination-domainname</I
></TT
>] [-S <TT
CLASS="REPLACEABLE"
><I
>source-domainname</I
></TT
> | -s <TT
CLASS="REPLACEABLE"
><I
>source-node</I
></TT
>] [-N <TT
CLASS="REPLACEABLE"
><I
>num-of-replicas</I
></TT
>] [-v]  <TT
CLASS="REPLACEABLE"
><I
>gfarm-URL</I
></TT
>... </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="DESCRIPTION"
></A
><H2
>DESCRIPTION</H2
><P
><B
CLASS="COMMAND"
>gfrep</B
> creates replicas of Gfarm files
specified by the <TT
CLASS="PARAMETER"
><I
>Gfarm-URL</I
></TT
>.</P
><P
>If the <TT
CLASS="PARAMETER"
><I
>Gfarm-URL</I
></TT
> parameter is a directory,
it will be copied recursively.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="OPTIONS"
></A
><H2
>OPTIONS</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><CODE
CLASS="OPTION"
>-D</CODE
> <TT
CLASS="PARAMETER"
><I
>destination-domainname</I
></TT
></DT
><DD
><P
>Specifies the domain name of destination filesystem nodes to which
replicas will be copied.
This option is used alone, or with the <CODE
CLASS="OPTION"
>-S</CODE
>
or <CODE
CLASS="OPTION"
>-s</CODE
> option.</P
><P
>If neither this nor the <CODE
CLASS="OPTION"
>-d</CODE
> option is specified, 
replicas may be copied to any of the hosts registered in the metadata.
Please refer to the description of the <CODE
CLASS="OPTION"
>-N</CODE
> option for details.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-d</CODE
> <TT
CLASS="PARAMETER"
><I
>destination-node</I
></TT
></DT
><DD
><P
>Specifies one destination filesystem node where replicas
will be copied.
This option is used alone, or with the <CODE
CLASS="OPTION"
>-s</CODE
> 
option.</P
><P
>If neither this nor the <CODE
CLASS="OPTION"
>-D</CODE
> option is specified, 
replicas may be copied to any of the hosts registered in the metadata.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-H</CODE
> <TT
CLASS="PARAMETER"
><I
>hostfile</I
></TT
></DT
><DD
><P
>Specifies a file which describes hostnames of
destination filesystem nodes on which the replica will be made.
The <TT
CLASS="PARAMETER"
><I
>hostfile</I
></TT
> consists of a filesystem node name
on each line.
If the number of nodes listed in the <TT
CLASS="PARAMETER"
><I
>hostfile</I
></TT
>
is less than the total number of file fragments,
it is treated as if the node names are specified repeatedly.</P
><P
>if ``-'' is specified, standard input is used to read the host list.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-I</CODE
> <TT
CLASS="PARAMETER"
><I
>file-section</I
></TT
></DT
><DD
><P
>Specifies a file section name to be copied.
Currently, this option can be specified only with the <CODE
CLASS="OPTION"
>-d</CODE
>
option.</P
><P
>It is possible to omit this option.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-m</CODE
></DT
><DD
><P
>Lets gfrep command do a migrate/move, instead of doing replication.
Currently, this works only with the -H, -P and -d options.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-N</CODE
> <TT
CLASS="PARAMETER"
><I
>num-of-replicas</I
></TT
></DT
><DD
><P
>Specifies the required number of file replicas, counting already
existing ones.
If there are a sufficient number of replicas in the destination nodes,
neither any copying nor any removal will be done.
This option is used alone, or with the <CODE
CLASS="OPTION"
>-D</CODE
>,
<CODE
CLASS="OPTION"
>-S</CODE
> or <CODE
CLASS="OPTION"
>-s</CODE
> option.</P
><P
>If this option is not specified, <CODE
CLASS="OPTION"
>-N 1</CODE
> is assumed.</P
><P
>The source nodes specified by the <CODE
CLASS="OPTION"
>-S</CODE
>
or <CODE
CLASS="OPTION"
>-s</CODE
> option are excluded from the destination nodes.
In other words, it's guaranteed that the number of replicas on
hosts, except those specified by the <CODE
CLASS="OPTION"
>-S</CODE
> or <CODE
CLASS="OPTION"
>-s</CODE
>
option, are the same or more than the number specified by the
<CODE
CLASS="OPTION"
>-N</CODE
> option.
However, when the destination is a subset of the source,
i.e. when the exclusion makes the destination an empty set,
this exclusion is not applied.
For example, if gfrep is executed with the
``<CODE
CLASS="OPTION"
>-N 3 -S subdomain.example.org -D example.org</CODE
>'' option,
it's guaranteed that there are at least 3 replicas in the hosts belonging
to example.org, excepting subdomain.example.org.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-P</CODE
> <TT
CLASS="PARAMETER"
><I
>host-pair-file</I
></TT
></DT
><DD
><P
>Specifies a file which describes hostname pairs of
source nodes and destination nodes.
The <TT
CLASS="PARAMETER"
><I
>host-pair-file</I
></TT
> consists of a pair
of a source node name and a destination node name in this order on each line.
The replica will be copied to the destination node, only if it exists
on the source node of the pair.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-S</CODE
> <TT
CLASS="PARAMETER"
><I
>source-domainname</I
></TT
></DT
><DD
><P
>Specifies the domain name of source filesystem nodes where replicas
will be copied from.
This option is used alone, or with the <CODE
CLASS="OPTION"
>-D</CODE
>
option.</P
><P
>If neither this nor the <CODE
CLASS="OPTION"
>-s</CODE
> option is specified, 
the source nodes will be selected from all nodes.</P
><P
>The hosts specified by this option will be excluded from
the destination nodes.
Please refer to the description of the <CODE
CLASS="OPTION"
>-N</CODE
> option for details.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-s</CODE
> <TT
CLASS="PARAMETER"
><I
>source-node</I
></TT
></DT
><DD
><P
>Specifies a source filesystem node where replicas
will be copied from.
This option is used alone, or with the <CODE
CLASS="OPTION"
>-D</CODE
>
or <CODE
CLASS="OPTION"
>-d</CODE
> option.</P
><P
>If neither this nor the <CODE
CLASS="OPTION"
>-s</CODE
> option is specified, 
the source nodes will be selected from all nodes.</P
><P
>The host specified by this option will be excluded from
the destination nodes.
Please refer to the description of the <CODE
CLASS="OPTION"
>-N</CODE
> option for details.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-v</CODE
></DT
><DD
><P
>Displays verbose output.</P
></DD
><DT
><CODE
CLASS="OPTION"
>-?</CODE
></DT
><DD
><P
>Displays a list of command options.</P
></DD
></DL
></DIV
></DIV
></BODY
></HTML
>

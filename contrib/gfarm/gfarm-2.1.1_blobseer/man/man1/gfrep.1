.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFREP" "1" "01 June 2008" "Gfarm" ""

.SH NAME
gfrep \- replicate Gfarm files
.SH SYNOPSIS

\fBgfrep\fR [ \fB-mnqv\fR ] [ \fB-S \fIsource-domainname\fB\fR ] [ \fB-D \fIdestination-domainname\fB\fR ] [ \fB-h \fIsource-hostfile\fB\fR ] [ \fB-H \fIdestination-hostfile\fB\fR ] [ \fB-N \fInum-of-replicas\fB\fR ] [ \fB-j \fInum-of-threads\fB\fR ] \fB\fIpath\fB\fR\fI ...\fR

.SH "DESCRIPTION"
.PP
\fBgfrep\fR creates specified number of replicas of
Gfarm files specified by the \fIpath\fR to specified
set of destination hosts.  When set of source hosts are specified,
only files stored on the set of source hosts are replicated.  A set of
hosts can be specified by a domain name and/or a host file.  When both
a domain name and a host file are specified, a set of hosts is
determined by both conditions.
.PP
If the \fIpath\fR parameter is a directory,
files under the directory will be copied recursively.
.SH "OPTIONS"
.TP
\fB-S \fIsource-domainname\fB\fR
Specifies the domain name of source filesystem nodes from which
replicas will be copied.
.TP
\fB-D \fIdestination-domainname\fB\fR
Specifies the domain name of destination filesystem nodes to which
replicas will be copied.

If neither this nor the \fB-H\fR option is specified, 
replicas may be copied to any available host.
.TP
\fB-h \fIsource-hostfile\fB\fR
Specifies a file which describes hostnames of
source filesystem nodes from which the replica will be made.
The \fIsource-hostfile\fR consists of a filesystem
node name on each line.

if ``-'' is specified, standard input is used to read the host list.
.TP
\fB-H \fIdestination-hostfile\fB\fR
Specifies a file which describes hostnames of
destination filesystem nodes on which the replica will be made.
The \fIdestination-hostfile\fR consists of a
filesystem node name on each line.

if ``-'' is specified, standard input is used to read the host list.
.TP
\fB-N \fInum-of-replicas\fB\fR
Specifies the required number of file replicas, counting already
existing ones.
If there are a sufficient number of replicas in the destination hosts,
neither any copying nor any removal will be done.

If this option is not specified, \fB-N 1\fR is assumed.
.TP
\fB-j \fInum-of-threads\fB\fR
Specifies the number of threads to create file replicas
simultaneously.  This option is only available when
compiled by an OpenMP C compiler.  By default, it will be the smallest
among the number of total files, the number of source hosts, and the
number of destination hosts.
.TP
\fB-m\fR
Lets gfrep command do a migrate/move, instead of doing replication.
.TP
\fB-n\fR
Displays files to be replicated, but does nothing.
.TP
\fB-q\fR
Suppresses non-error messages.
.TP
\fB-v\fR
Displays verbose output.
.TP
\fB-?\fR
Displays a list of command options.
.SH "BUGS"
.PP
A source host is not always selected within a set of source hosts.
This means deleted replica when migrating files is not always a
replica within the set of specified source hosts.

.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GLOGGER" "8" "30 September 2003" "snmptool" ""
.SH NAME
glogger \- SNMP の GET リクエストで各ホストの情報を集める
.SH SYNOPSIS

\fBglogger\fR [ \fB\fIオプション\fB\fR ]

.SH "DESCRIPTION"
.PP
プログラム glogger は、SNMP GETリクエストを使って、ネットワーク上
にある各ホストから情報を集め、観測データとしてファイルへ出力します。
設定ファイルで指定した観測インターバルごとに、各ホストに対して
GETリクエストし、反応の早かったホストから順番に受信、出力処理をします。
一つのホストに対して、複数のOIDを一つのパケットでリクエストし、一つの
パケットで MIBからの値を受信します。
観測対象のホスト、スイッチなどは、それぞれ SNMPエージェントが動作し、
観測する MIBツリーの OIDを GLogger を動作させるホストから参照できるように
しておく必要があります。
SNMPのバージョンは SNMPv1 固定です。
.SH "OPTIONS"
.TP
\fB-config [input configuration file name]\fR
GLogger の設定ファイルを指定します。
設定ファイルが見つからない場合はエラー終了です。設定ファイル
の指定が省略された場合は /etc/glogger/glogger.conf を読み込みます。
ファイル名の代わりにハイフン "-" を指定すると、標準入力から設定
ファイルとして読み込みます。
.TP
\fB -daemon [output PID file name]\fR
GLogger をデーモン化します。PIDを保存するファイルを指定します。
このオプションが指定されない場合は、呼び出されたシェルからは
fork() せず、標準出力に動作ログが表示されます。
glogger コマンド自体で同時起動確認は行ないません。
.TP
\fB -mmap [output filename]\fR
mmap()関数を使い、-maxsize オプションで指定したファイルサイズの
ファイルを確保してから、そのファイルへ出力します。
設定ファイルの path 項(後述)の設定は無視され、出力先は output filename
の 1箇所へまとめて出力されるので注意が必要です。
-maxsize オプションを指定していないときは、約 5KB のファイルを確保し、
それに出力して終了します。
.TP
\fB-maxsize [output file size]\fR
output file size の大きさに出力ファイルサイズを制限します。
設定ファイルの maxfilesize よりも優先されます。
このサイズを超えると、新しくファイルを作成し、そのファイルへ出力先を
切り替えて、出力を続けます。
設定ファイルの path 設定のルールで時刻を用いても、その時刻ごとの
タイミングではなく、output file size を超えたときのみ、出力先のファイル
を切り替えるようになります。
-mmap モードの時は、ここで指定したサイズのファイルが作成されます。
.TP
\fB-checkconf\fR
設定ファイルの内容をテキストで標準出力へ出力します。
設定ファイルの記述が間違っていれば、エラーメッセージを出力し、終了
します。設定ファイルを指定する場合は、-config オプションで指定します。
.SH "SIGNAL"
.PP
gloggerプロセスはシグナル受領時、以下のように動作します。
.TP
\fBSIGHUP\fR
まだ応答が返ってきていない計測対象ホストに関しては、このシグナ
ルを受けた時点で中断し(タイムアウト扱いにし)、計測データをファ
イルへ出力してから、再起動します。
.TP
\fBSIGINT\fR
まだ応答が返ってきていない計測対象ホストに関しては、このシグナ
ルを受けた時点で中断し(タイムアウト扱いにし)、計測データをファ
イルへ出力して終了します。
.SH "SEE ALSO"
.PP
\fBglogdump\fR(8),
\fBglogger.conf\fR(5),
\fBglogger_logdata\fR(5)
